# Intellij-idea-plugin
How to solve wrong initial code generated by  Plugin DevKit  (or enable K2 for plugin)

If it happens that u just start creating your 1st plugin with Intellij Idea Plugin Devkit and selecting Kotlin, Compose as a base

What should u fix to be capable to test your 1st plugin after initial generation
## How to run it inside local idea
go to build.gradle.kts

under 
```
dependencies {
    intellijPlatform {
       intellijIdea("2025.2.4")
       ...
    }
}
```

and comment //intellijIdea("2025.2.4")
than add 
local("C:\\Program Files\\JetBrains\\IntelliJ IDEA 2025.3.2") - this will allow you to test your plugin locally on your machine instead of downloading a version from intellij idea website on run
```
dependencies {
    intellijPlatform {
       //intellijIdea("2025.2.4")
       local("path_to_your_idea_folder")
       ...
    }
}
```



## how to fix "your plugin is incompatible with Kotlin in "K2" mode" error

add to plugin.xml
```
 <extensions defaultExtensionNs="com.intellij">
        <supportsKotlinPluginMode supportsK2="true" />
        ...
</extensions>
```
## how to fix "Module was compiled with an incompatible version of Kotlin. The binary version of its metadata is 2.3.0, expected version is 2.1.0."
comment bundledPlugin("org.jetbrains.kotlin")
```
dependencies {
    intellijPlatform {
        ...
        //bundledPlugin("org.jetbrains.kotlin")
        composeUI()
        ...
    }
}
```

Hope it works, if not - u can create same new plugin but without "add samples" checked, than placed things above

⚠️ **Disclaimer:** This is not an official guide. These solutions worked for my specific configuration and may not work for everyone. Always test changes in a safe environment first.
**Legal Notice:** The information in this README is provided "as is" without warranty of any kind. The author disclaims all liability for any damages, direct or indirect, that may result from the use or misuse of this information.
